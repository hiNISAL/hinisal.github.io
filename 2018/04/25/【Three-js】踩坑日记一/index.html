<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="NISAL"><link rel="alternative" href="/atom.xml" title="HIσ`∀´)σNISAL" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>【Three.js】踩坑日记一 - HIσ`∀´)σNISAL</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">HIσ`∀´)σNISAL</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-04-25T06:03:06.000Z">April 25, 2018</time><h1 class="post__title"><a href="/2018/04/25/【Three-js】踩坑日记一/">【Three.js】踩坑日记一</a></h1><div class="post__main echo"><p>想学习3D相关的内容很久了 有接触过Unity 而且也做过几个小玩意儿 不过还是不太习惯</p>
<p>在高中(2012年)的时候 那时候虽然HTML5标准还是草案 但是很多浏览器已经支持了 包括对WebL的支持</p>
<p>当时和WebGL相关的demo已经很多了 就觉得很酷 那会儿没接触前端 接触前端是2017年初的事情 到现在一年半左右了</p>
<p>其实我觉得真的要做WebGL开发 不需要太多的大前端相关的知识 比如现在的构建工具 css相关的与处理器</p>
<p>除了语言是JS 别的内容和做其他3D开发区别不大</p>
<p>WebGL本身难度还是挺大的 好在有很多库 站在巨人的肩膀上学习总是轻松一点</p>
<p>给自己开坑学习 当然不是全职发展WebGL 以一种兴趣爱好的方式</p>
<p>整个记录中的涉及的例子基本是围绕<code>Three.js开发指南</code>来的</p>
<hr>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>其实没太多需要准备的 准备好第三方依赖 编辑器或者IDE 以及浏览器环境就好了</p>
<h2 id="进入学习"><a href="#进入学习" class="headerlink" title="进入学习"></a>进入学习</h2><p>在Three.js中呢 有三个很重要的概念 也是使用它构建3D应用最重要的概念</p>
<ul>
<li>场景 Scene</li>
<li>摄像机 Camera</li>
<li>渲染器 Renderer</li>
</ul>
<p><code>场景</code> 其实就是放所有想看的物体的 比如一个球 一棵树 光源等等</p>
<p><code>摄像机</code> 我们可以通过摄像机来看到我们想看到的场景中的内容 摄像机的位置决定了我们看到的东西的位置</p>
<p><code>渲染器</code> 渲染器就是把我们的场景和摄影机渲染到我们的浏览器中</p>
<h2 id="搭建基本结构"><a href="#搭建基本结构" class="headerlink" title="搭建基本结构"></a>搭建基本结构</h2><p>结构很简单 其实就一个html</p>
<p>three.js从bootcdn上获取 使用的版本是r92</p>
<blockquote>
<p>index.html的基本代码</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;wrap&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcss.com/three.js/92/three.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    var T = THREE;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>结构很简单 就是基础的一个html</p>
<p>其中引入了<code>three.js</code> 并且有一个简单的样式 去掉了body的默认外边距 并且隐藏了滚动条</p>
<p><code>id为wrap的div</code>作为整个应用渲染时候的容器</p>
<p>另外还有一个<code>script标签</code> three.js暴露在全局上的命名空间是THREE 为了写起来方便一些 我把他赋值给了T</p>
<h2 id="创建场景"><a href="#创建场景" class="headerlink" title="创建场景"></a>创建场景</h2><p>创建场景很简单 new一个<code>THREE.Scene</code>就好了 因我把THREE赋值给了T 所以这里就是 <code>new T.Scene</code> 之后也不再重复T是啥了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 创建场景</span><br><span class="line">var scene = new T.Scene();</span><br></pre></td></tr></table></figure>
<p>创建场景就这样玩成了</p>
<h2 id="创建相机"><a href="#创建相机" class="headerlink" title="创建相机"></a>创建相机</h2><p>其实相机分为两种 一种是透视相机 一种是正交相机</p>
<p>透视相机更贴合具体现实 符合近大远小的规则</p>
<p>而正交相机不会</p>
<p>这里使用透视相机 有关正交相机目前也不用太纠结</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 创建透视相机</span><br><span class="line">var camera = new T.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);</span><br></pre></td></tr></table></figure>
<p>有关这里的参数呢 其实书中目前还没讲 不过我看了一下相关资料</p>
<p>第一个参数 表示夹角的角度 什么夹角呢 可以想像成<code>上眼皮和下眼皮夹脚的角度</code> 我们眼睛眯起来就角度就小一点 睁大一点角度就大一点</p>
<p>第二个参数呢 表示<code>横向和纵向的比例</code> 这有点像显示器的比例 比如<code>16:9</code> <code>4:3</code> 这里呢就代表摄像机我们看到的内容的比例 </p>
<p>这里呢把浏览器的宽度和高度除一除 就是浏览器的比例了</p>
<p>第三个参数 就是<code>最近能看到的距离</code></p>
<p>第四个参数 就是<code>最远能看到的距离</code></p>
<p>紧接着 设置摄影机的位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">camera.position.x = -30;</span><br><span class="line">camera.position.y = 40;</span><br><span class="line">camera.position.z = 30;</span><br><span class="line"></span><br><span class="line">camera.lookAt(scene.position);</span><br></pre></td></tr></table></figure>
<p><code>position</code>很好理解</p>
<p>这个<code>lookAt</code> 就是摄影机指向的位置 这里呢就代表指向场景的中心</p>
<h2 id="创建渲染器"><a href="#创建渲染器" class="headerlink" title="创建渲染器"></a>创建渲染器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var renderer = new T.WebGLRenderer();</span><br><span class="line">// 背景色 eee</span><br><span class="line">renderer.setClearColor(0xEEEEEE);</span><br><span class="line">// 设置大小 全屏</span><br><span class="line">renderer.setSize(window.innerWidth, window.innerHeight);</span><br><span class="line">// 开启阴影</span><br><span class="line">renderer.shadowMap.enabled = true;</span><br></pre></td></tr></table></figure>
<p>创建一个渲染器也很简单 使用<code>new THREE.WebGLRenderer()</code>就可以创建一个渲染器</p>
<p><code>setClearColor</code>用于设置渲染器渲染出的空场景的背景色</p>
<p><code>setSize</code>用来设置渲染出来的画面的尺寸</p>
<p><code>shadowMap.enabled</code> 属性用来控制是否开启阴影</p>
<h2 id="创建辅助轴"><a href="#创建辅助轴" class="headerlink" title="创建辅助轴"></a>创建辅助轴</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 创建轴 长度20</span><br><span class="line">var axes = new T.AxesHelper(20);</span><br><span class="line">// 把轴放到场景中</span><br><span class="line">scene.add(axes);</span><br></pre></td></tr></table></figure>
<p>使用 <code>THREE.AxesHelper(d)</code> 来创建辅助轴 会把三个轴 (x y z) 用线标识出来</p>
<p>其中参数跟的是长度</p>
<p>创建完轴之后 需要把它添加到场景中</p>
<h2 id="创建平面几何体"><a href="#创建平面几何体" class="headerlink" title="创建平面几何体"></a>创建平面几何体</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var planeGeometry = new T.PlaneGeometry(60, 20);</span><br></pre></td></tr></table></figure>
<p>使用 <code>new THREE.PlaneGeometry</code> 就能创建一个平面 两个参数分别为宽和高</p>
<p>为平面几何体创建材质<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var planeMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">  color: 0xcccccc</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>创建一个网格对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var plane = new T.Mesh(planeGeometry, planeMaterial);</span><br></pre></td></tr></table></figure></p>
<p>把平面几何体和平面的材质传入 <code>T.Mesh</code> 就可以拿到一个网格对象</p>
<p>这样就创建完了一个平面</p>
<p>紧接着我们设置平面的位置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 绕x轴转90度</span><br><span class="line">plane.rotation.x = -0.5 * Math.PI;</span><br><span class="line"></span><br><span class="line">plane.position.x = 15;</span><br><span class="line">plane.position.y = 0;</span><br><span class="line">plane.position.z = 0;</span><br><span class="line"></span><br><span class="line">scene.add(plane);</span><br></pre></td></tr></table></figure>
<p><code>rotation</code> 可以设置旋转角度 我们让他绕x轴旋转90度 呈现的效果就是一个平躺的平面</p>
<p>然后通过 <code>position</code> 设置他的位置</p>
<p>设置完之后 把它加入到场景中</p>
<h2 id="查看效果"><a href="#查看效果" class="headerlink" title="查看效果"></a>查看效果</h2><p>到目前为止 我们已经生命了最基础的几个对象</p>
<ul>
<li>摄像机</li>
<li>场景</li>
<li>渲染器</li>
<li>平面几何体</li>
<li>辅助轴</li>
</ul>
<p>并且我们把<code>平面几何体</code> <code>辅助轴</code> 添加到场景中</p>
<p>接下来我们要做的 就是把场景放到我们的场景容器中(div#wrap)</p>
<p>然后调用渲染器 把我们场景的内容和摄像机渲染出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&apos;wrap&apos;).appendChild(renderer.domElement);</span><br><span class="line">renderer.render(scene, camera);</span><br></pre></td></tr></table></figure>
<p>场景的dom对象就放在 <code>renderer.domElement</code> 中</p>
<p>我们把他插入到wrap中 就可以在页面中显示我们场景渲染后的结果了 但是现在还没有渲染</p>
<p>我们需要调用 <code>renderer.render()</code> 来进行渲染 把场景和相机对象作为参数就可以了</p>
<p>我们来看一下现在的整体代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;wrap&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcss.com/three.js/92/three.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    var T = THREE;</span><br><span class="line"></span><br><span class="line">    // 创建场景</span><br><span class="line">    var scene = new T.Scene();</span><br><span class="line">    // 创建透视相机</span><br><span class="line">    var camera = new T.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);</span><br><span class="line"></span><br><span class="line">    camera.position.x = -30;</span><br><span class="line">    camera.position.y = 40;</span><br><span class="line">    camera.position.z = 30;</span><br><span class="line"></span><br><span class="line">    camera.lookAt(scene.position);</span><br><span class="line"></span><br><span class="line">    // 渲染器</span><br><span class="line">    var renderer = new T.WebGLRenderer();</span><br><span class="line">    // 背景色 eee</span><br><span class="line">    renderer.setClearColor(0xEEEEEE);</span><br><span class="line">    // 设置大小 全屏</span><br><span class="line">    renderer.setSize(window.innerWidth, window.innerHeight);</span><br><span class="line">    // renderer.shadowMapEnabled = true;</span><br><span class="line">    renderer.shadowMap.enabled = true;</span><br><span class="line">    // console.log(renderer.shadowMap)</span><br><span class="line"></span><br><span class="line">    // 创建轴 长度20</span><br><span class="line">    var axes = new T.AxesHelper(20);</span><br><span class="line">    // 把轴放到场景中</span><br><span class="line">    scene.add(axes);</span><br><span class="line"></span><br><span class="line">    // 创建平面几何体</span><br><span class="line">    var planeGeometry = new T.PlaneGeometry(60, 20);</span><br><span class="line">    // 创建材质 颜色ccc 普通材质 不反光</span><br><span class="line">    var planeMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">      color: 0xcccccc</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    var plane = new T.Mesh(planeGeometry, planeMaterial);</span><br><span class="line"></span><br><span class="line">    // 绕x轴转90度</span><br><span class="line">    plane.rotation.x = -0.5 * Math.PI;</span><br><span class="line"></span><br><span class="line">    plane.position.x = 15;</span><br><span class="line">    plane.position.y = 0;</span><br><span class="line">    plane.position.z = 0;</span><br><span class="line"></span><br><span class="line">    scene.add(plane);</span><br><span class="line"></span><br><span class="line">    // 占位1 等下放球</span><br><span class="line">    // 占位2 等下放立方体</span><br><span class="line"></span><br><span class="line">    document.getElementById(&apos;wrap&apos;).appendChild(renderer.domElement);</span><br><span class="line">    renderer.render(scene, camera);</span><br><span class="line">  </span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>现在 我们在浏览器中打开我们的文件 就可以看到这样的场景了</p>
<p>我们可以试着调整一下位置参数等等 看看不同的效果</p>
<h2 id="再加入几个元素"><a href="#再加入几个元素" class="headerlink" title="再加入几个元素"></a>再加入几个元素</h2><p>我们可以试着再加入两个元素 <code>球体</code>和<code>立方体</code></p>
<p>创建一个立方体可以使用 <code>new THREE.BoxGeometry(长, 宽, 高)</code></p>
<p>创建一个球体可以使用 <code>new THREE.SphereGeometry(半径, 水平方向分段数, 垂直方向分段数)</code></p>
<p>立方体的参数很好理解 但是球体后面这两个参数就不太好理解了 我们可以想象一下</p>
<p>四条相等的边的四边形 就是一个矩形对吧 那五条边 是不是相对圆了一点 变成六条边 是不是又圆了一点</p>
<p>20条边相等的20边形是不是就十分接近圆形了 这两个参数和这个道理差不多 越大越圆 越小越方 但是实际不会变方 这样解释就很好理解了吧</p>
<p>再不理解 那就理解成数字越大越圆</p>
<p>好 我们在之前的完整代码中有两个站位 我们分别插入代码</p>
<blockquote>
<p>占位1的代码 生成一个球<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var sphereGeometry = new T.SphereGeometry(4, 10, 10);</span><br><span class="line">var sphereMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">  color: 0x7777ff,</span><br><span class="line">  // 线框属性</span><br><span class="line">  wireframe: true</span><br><span class="line">&#125;);</span><br><span class="line">var sphere = new T.Mesh(sphereGeometry, sphereMaterial);</span><br><span class="line"></span><br><span class="line">sphere.position.x = 20;</span><br><span class="line">sphere.position.y = 4;</span><br><span class="line">sphere.position.z = 2;</span><br><span class="line"></span><br><span class="line">sphere.castShadow = true;</span><br><span class="line">scene.add(sphere);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>除了在生成材质的时候 参数上多了一个<code>wireframe</code> 别的没有太大区别 相信大家都看得懂</p>
<p><code>wireframe</code>呢是线框属性 具体什么样子 可以自己尝试一下加上和不加的区别</p>
<p>然后加上的时候去修改水平方向和垂直方向的分段数 就能很好的理解这两个参数是什么意思了</p>
<blockquote>
<p>占位2代码 生成一个立方体<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var cubeGeometry = new T.BoxGeometry(4, 4, 4);</span><br><span class="line">var cubeMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">  color: 0xff0000,</span><br><span class="line">  wireframe: true</span><br><span class="line">&#125;);</span><br><span class="line">var cube = new T.Mesh(cubeGeometry, cubeMaterial);</span><br><span class="line"></span><br><span class="line">cube.position.x = -4;</span><br><span class="line">cube.position.y = 3;</span><br><span class="line">cube.position.z = 0;</span><br><span class="line"></span><br><span class="line">cube.castShadow = true;</span><br><span class="line">scene.add(cube);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>除了构造函数 基本一样 这时候再去运行一下我们的代码 在场景中就多了一个立方体和一个球</p>
<p>我们可以尝试着去掉创建材质的时候给的 <code>wireframe</code> 属性 看一下效果</p>
<p>另外 <code>THREE.SphereGeometry</code> 构造函数不止可以传长宽高三个参数 还能再传三个 分别对长宽高的分段数 也可以自己尝试一下</p>
<h2 id="光源和阴影"><a href="#光源和阴影" class="headerlink" title="光源和阴影"></a>光源和阴影</h2><p>现在场景的平台上 有了一个球和一个立方体</p>
<p>我们进一步 给他们加上阴影 但是要有影子 肯定要有光 所以我们要先添加光源</p>
<p>首先创建一个光源并加入到场景中 在渲染之前插入就可以了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var spotLight = new T.SpotLight(0xffffff);</span><br><span class="line">spotLight.position.set(-40, 60, -10);</span><br><span class="line">scene.add(spotLight);</span><br></pre></td></tr></table></figure>
<p>声明一个光源 我们用 <code>THREE.SpotLight</code> 构造函数就可以了 给的参数就是光源的颜色</p>
<p>然后我们通过 <code>position.set()</code> 方法 设置光源的位置</p>
<p>然后把光源加入到我们的场景中</p>
<p>好 这个时候我们刷新浏览器 发现并没有鸡儿变化</p>
<p>其实这是因为我们的材质问题 我们的普通材质 是不会对光源有反应的 普通的材质只会根据我们给的颜色来渲染物体</p>
<p>接着 我们分别来改变一平面、球体和立方体的材质</p>
<blockquote>
<p>修改平面的材质<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var planeMaterial = new T.MeshLambertMaterial(&#123; color: 0xffffff &#125;);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>修改球体的材质<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var sphereMaterial = new T.MeshLambertMaterial(&#123; color: 0x7777ff &#125;);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>修改立方体的材质<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var cubeMaterial = new T.MeshLambertMaterial(&#123; color: 0xff0000 &#125;);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><code>MeshLambertMaterial</code> 这种材质会对光源做出反应</p>
<p>好了 现在我们把材质修改好了 这时候再刷新浏览器 这时候发现光源的效果好像已经有了 立方体也一面黑一面白 似乎对光源起了反应</p>
<p>但是阴影还是没出来</p>
<p>其实渲染阴影很耗费性能 默认不渲染</p>
<p>所以还要做一些改动</p>
<p>首先我们在之前已经写了这一行代码 <code>renderer.shadowMap.enabled = true;</code></p>
<p>这一行呢 告诉了渲染器 需要设置阴影</p>
<p>但是这还不够 得告诉我们的平面 球和立方体 谁<code>接受阴影</code> 谁<code>投射阴影</code></p>
<blockquote>
<p>指定平面 是接受阴影的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plane.receiveShadow = true;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>指定球体 投射阴影<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sphere.castShadow = true;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>指定立方体 投射阴影<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cube.castShadow = true;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>这样我们就告诉了我们场景中的三个物体 谁投射 谁接受</p>
<p>但是这样还是不够的 我们得让光源产生阴影</p>
<p>我们只需要将我们<code>spotLight</code>的<code>castShadow</code>属性设置为true就可以了</p>
<blockquote>
<p>让光源生产阴影<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spotLight.castShadow = true;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>好了 到这步 我们再刷新我们的浏览器 阴影就出来了</p>
<p>再上一下到现在为止的完整代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">      margin: 0;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;wrap&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcss.com/three.js/92/three.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    var T = THREE;</span><br><span class="line"></span><br><span class="line">    // 创建场景</span><br><span class="line">    var scene = new T.Scene();</span><br><span class="line">    // 创建透视相机</span><br><span class="line">    var camera = new T.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);</span><br><span class="line"></span><br><span class="line">    camera.position.x = -30;</span><br><span class="line">    camera.position.y = 40;</span><br><span class="line">    camera.position.z = 30;</span><br><span class="line"></span><br><span class="line">    camera.lookAt(scene.position);</span><br><span class="line"></span><br><span class="line">    // 渲染器</span><br><span class="line">    var renderer = new T.WebGLRenderer();</span><br><span class="line">    // 背景色 eee</span><br><span class="line">    renderer.setClearColor(0xEEEEEE);</span><br><span class="line">    // 设置大小 全屏</span><br><span class="line">    renderer.setSize(window.innerWidth, window.innerHeight);</span><br><span class="line">    // renderer.shadowMapEnabled = true;</span><br><span class="line">    renderer.shadowMap.enabled = true;</span><br><span class="line">    // console.log(renderer.shadowMap)</span><br><span class="line"></span><br><span class="line">    // 创建轴 长度20</span><br><span class="line">    var axes = new T.AxesHelper(20);</span><br><span class="line">    // 把轴放到场景中</span><br><span class="line">    scene.add(axes);</span><br><span class="line"></span><br><span class="line">    // 创建平面几何体</span><br><span class="line">    var planeGeometry = new T.PlaneGeometry(60, 20);</span><br><span class="line">    // 创建材质 颜色ccc 普通材质 不反光</span><br><span class="line">    // var planeMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">    //   color: 0xcccccc</span><br><span class="line">    // &#125;);</span><br><span class="line">    var planeMaterial = new T.MeshLambertMaterial(&#123; color: 0xffffff &#125;);</span><br><span class="line">    var plane = new T.Mesh(planeGeometry, planeMaterial);</span><br><span class="line">    plane.receiveShadow = true;</span><br><span class="line"></span><br><span class="line">    // 绕x轴转90度</span><br><span class="line">    plane.rotation.x = -0.5 * Math.PI;</span><br><span class="line"></span><br><span class="line">    plane.position.x = 15;</span><br><span class="line">    plane.position.y = 0;</span><br><span class="line">    plane.position.z = 0;</span><br><span class="line"></span><br><span class="line">    scene.add(plane);</span><br><span class="line"></span><br><span class="line">    var sphereGeometry = new T.SphereGeometry(4, 10, 10);</span><br><span class="line">    // var sphereMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">    //   color: 0x7777ff,</span><br><span class="line">    //   // 线框属性</span><br><span class="line">    //   wireframe: true</span><br><span class="line">    // &#125;);</span><br><span class="line">    var sphereMaterial = new T.MeshLambertMaterial(&#123; color: 0x7777ff &#125;);</span><br><span class="line">    var sphere = new T.Mesh(sphereGeometry, sphereMaterial)</span><br><span class="line"></span><br><span class="line">    sphere.position.x = 20;</span><br><span class="line">    sphere.position.y = 4;</span><br><span class="line">    sphere.position.z = 2;</span><br><span class="line"></span><br><span class="line">    sphere.castShadow = true;</span><br><span class="line">    scene.add(sphere);</span><br><span class="line"></span><br><span class="line">    var cubeGeometry = new T.BoxGeometry(4, 4, 4, 10, 10, 10);</span><br><span class="line">    // var cubeMaterial = new T.MeshBasicMaterial(&#123;</span><br><span class="line">    //   color: 0xff0000,</span><br><span class="line">    //   wireframe: true</span><br><span class="line">    // &#125;);</span><br><span class="line">    var cubeMaterial = new T.MeshLambertMaterial(&#123; color: 0xff0000 &#125;);</span><br><span class="line">    var cube = new T.Mesh(cubeGeometry, cubeMaterial);</span><br><span class="line"></span><br><span class="line">    cube.position.x = -4;</span><br><span class="line">    cube.position.y = 3;</span><br><span class="line">    cube.position.z = 0;</span><br><span class="line"></span><br><span class="line">    cube.castShadow = true;</span><br><span class="line">    scene.add(cube);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var spotLight = new T.SpotLight(0xffffff);</span><br><span class="line">    spotLight.position.set(-40, 60, -10);</span><br><span class="line">    spotLight.castShadow = true;</span><br><span class="line"></span><br><span class="line">    scene.add(spotLight);</span><br><span class="line"></span><br><span class="line">    document.getElementById(&apos;wrap&apos;).appendChild(renderer.domElement);</span><br><span class="line">    renderer.render(scene, camera);</span><br><span class="line">  </span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="让立方体动起来"><a href="#让立方体动起来" class="headerlink" title="让立方体动起来"></a>让立方体动起来</h2><p>好了 我们接着让我们的立方体转起来</p>
<p>旋转的角度是通过 <code>rotation</code> 属性来控制的</p>
<p>那我们就在末尾加个定时器 定时改变立方体的<code>rotation</code>属性 然后再重新渲染我们的场景就好了对吧</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setInterval(function() &#123;</span><br><span class="line">  cube.rotation.x += 0.1;</span><br><span class="line">  renderer.render(scene, camera);</span><br><span class="line">&#125;, 100);</span><br></pre></td></tr></table></figure>
<p>我们这样写了一个定时器 每100毫秒 让他沿x的旋转角度加上0.1</p>
<p>好 现在刷新浏览器 立方体就开始动了</p>
<p>但是其实和动画相关的 推荐 <code>requestAnimationFrame</code></p>
<p>这个方法会和浏览器的刷新率同步 而且不会丢帧</p>
<p>我们把我们的定时器改成 <code>requestAnimationFrame</code></p>
<p>我们写一个<code>render</code>方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function render() &#123;</span><br><span class="line">  cube.rotation.x += 0.1;</span><br><span class="line">  renderer.render(scene, camera);</span><br><span class="line">  requestAnimationFrame(render);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们把 <code>renderer.render(scene, camera)</code> 也就是渲染场景和摄像机的这一行 放到这个方法中</p>
<p>然后 <code>render</code> 函数的最后一行 调用 <code>requestAnimationFrame(render)</code></p>
<p>意思就是说 下一次屏幕进行帧刷新的时候会调用我们的 <code>requestAnimationFrame</code> 里的回调</p>
<p>好 这样我们的动画就能保持60帧左右的频率了</p>
<p>还要改一个地方 我们要把函数外的 <code>renderer.render(scene, camera)</code> 改成rander函数的调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// renderer.render(scene, camera);</span><br><span class="line">render();</span><br></pre></td></tr></table></figure>
<p>现在 刷新一下浏览器 我们的立方体就转的很流畅了</p>
<h2 id="监测"><a href="#监测" class="headerlink" title="监测"></a>监测</h2><p>我们可能会想要知道当前我们渲染的频率 每一次渲染需要花多少时间 还有占用的内存</p>
<p>Three.js官方有一个<code>Stats</code>工具 用来帮助我们解决这一个问题</p>
<p>我们引入这个js文件 一样的 我是从bootcdn上捞的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.bootcss.com/stats.js/r17/Stats.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>引入了之后我们先初始化一个state</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var stats = new Stats();</span><br><span class="line">stats.setMode(0);</span><br><span class="line">stats.domElement.style.position = &apos;fixed&apos;;</span><br><span class="line">stats.domElement.style.left = &apos;0px&apos;;</span><br><span class="line">stats.domElement.style.top = &apos;0px&apos;;</span><br><span class="line">document.getElementById(&apos;state&apos;).appendChild(stats.domElement);</span><br></pre></td></tr></table></figure>
<p>使用 <code>new States()</code> 来初始化一个sates</p>
<p>然后我们设置模式为0 意思就是说默认显示帧率</p>
<p>然后设置对应现实在html中元素的样式</p>
<p>让他相对浏览器定位 然后粘在左上角</p>
<p>最后插入到我们的 id 为 <code>state</code> 的元素中 这时候我们要往html中加入这个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;state&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>完了以后 我们在 <code>render</code> 方法中 加入这一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stats.update();</span><br></pre></td></tr></table></figure>
<p>我们通过 <code>update</code> 方法来通知监测工具进行更新 每一次渲染的时候进行更新</p>
<p>这个时候刷新页面 左上角就有我们想要的工具试图了</p>
<h2 id="在运行过程中热更新参数"><a href="#在运行过程中热更新参数" class="headerlink" title="在运行过程中热更新参数"></a>在运行过程中热更新参数</h2><p>如果能在运行的过程中动态的修改立方体的旋转角度就好了</p>
<p>其实也是有工具的 我们可以通过<code>Dat-GUI</code>来帮助我们实现</p>
<p>先在html中引入这个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.bootcss.com/dat-gui/0.7.1/dat.gui.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>然后我们需要用new关键字 来new一个匿名函数(匿名函数会当作一个构造函数来用)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var controls = new function() &#123;</span><br><span class="line">  this.rotationSpeed = 0.02;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们设置旋转速度初始为 <code>0.02</code></p>
<p>然后我们new一个GUI</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var gui = new dat.GUI();</span><br><span class="line">gui.add(controls, &apos;rotationSpeed&apos;, 0, 0.5); // 范围 0 - 0.5</span><br></pre></td></tr></table></figure>
<p>刚才生成的<code>controls</code>对象 就是第一个参数 第二个参数呢 对应我们<code>controls</code>对象 后面两个参数呢 是指定可以调节的范围</p>
<p>然后 我们修改一下render函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function render() &#123;</span><br><span class="line">  // cube.rotation.x += 0.001;</span><br><span class="line">  // cube.rotation.y += 0.001;</span><br><span class="line">  // cube.rotation.z += 0.001;</span><br><span class="line"></span><br><span class="line">  cube.rotation.x += controls.rotationSpeed;</span><br><span class="line">  cube.rotation.y += controls.rotationSpeed;</span><br><span class="line">  cube.rotation.z += controls.rotationSpeed;</span><br><span class="line"></span><br><span class="line">  stats.update();</span><br><span class="line"></span><br><span class="line">  renderer.render(scene, camera);</span><br><span class="line">  requestAnimationFrame(render);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好 现在刷新浏览器 右上角就有控制面板了 可以控制我们绑定的变量</p>
<h2 id="适应分辨率"><a href="#适应分辨率" class="headerlink" title="适应分辨率"></a>适应分辨率</h2><p>上面的步骤都完成了 我们看最后一步 来适应浏览器</p>
<p>自适应浏览器就很简单了 我们监听<code>window</code>的<code>resize</code>事件</p>
<p>要自适应 我们要改变的就是渲染器的宽高 和摄像机的横纵比例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&apos;resize&apos;, function() &#123;</span><br><span class="line"></span><br><span class="line">  camera.aspect = window.innerWidth / window.innerHeight;</span><br><span class="line">  camera.updateProjectionMatrix();</span><br><span class="line">  renderer.setSize(window.innerWidth, window.innerHeight);</span><br><span class="line"></span><br><span class="line">&#125;, false);</span><br></pre></td></tr></table></figure>
<p>通过 <code>camera.aspect</code> 属性 来设置摄像机的比例</p>
<p>然后通过 <code>camera.updateProjectionMatrix</code> 方法 来更新摄像机</p>
<p>最后 我们设置渲染的的宽高就好了</p>
<p>到此 第一节日记结束了</p>
</div></header></article><!--div.comments#lv-container(data-id = theme.livere_id, data-uid = theme.livere_uid)//script.
  //(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');--></main><footer class="foot"><div class="foot-copy">&copy; 2017-2018 NISAL</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/assets/z16.model.json"}});</script></body></html>